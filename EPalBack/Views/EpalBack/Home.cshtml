

    <!-- Sidebar -->
 
    <!-- End of Sidebar -->
    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">
        <!-- Main Content -->
        <div id="content">

            <!-- Topbar -->
            <div class="container-fluid">
                <div class="row pb-3" >
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="card bg-success text-white shadow">
                            <div class="card-body">
                                產品總數
                                <div class="d-flex justify-content-end align-items-end">
                                    <div class=" h1 mb-0" id="producttotals"></div>
                                    <div>/筆</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="card bg-info text-white shadow">
                            <div class="card-body">
                                會員總數
                                <div class="d-flex justify-content-end align-items-end">
                                    <div class=" h1 mb-0" id="membertotals"></div>
                                    <div>/筆</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="card bg-warning text-white shadow">
                            <div class="card-body">
                                訂單總數
                                <div class="d-flex justify-content-end align-items-end">
                                    <div class=" h1 mb-0" id="ordertotals"></div>
                                    <div>/筆</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="card bg-danger text-white shadow">
                            <div class="card-body">
                                評論總數
                                <div class="d-flex justify-content-end align-items-end">
                                    <div class=" h1 mb-0" id="commenttotal"></div>
                                    <div>/筆</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="card bg-danger text-white shadow">
                            <div class="card-body">
                                本月收益
                                <div class="d-flex justify-content-end align-items-end">
                                    <div class=" h1 mb-0" id="earningsmonthtotal"></div>
                                    <div>/$</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="card bg-success text-white shadow">
                            <div class="card-body">
                                年收益
                                <div class="d-flex justify-content-end align-items-end">
                                    <div class=" h1 mb-0" id="earningsyeartotal"></div>
                                    <div>/筆</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="card bg-info text-white shadow">
                            <div class="card-body">
                                月訂單
                                <div class="d-flex justify-content-end align-items-end">
                                    <div class=" h1 mb-0" id="ordermonthtotal"></div>
                                    <div>/筆</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-3 col-md-6 mb-4">
                        <div class="card bg-warning text-white shadow">
                            <div class="card-body">
                                年訂單
                                <div class="d-flex justify-content-end align-items-end">
                                    <div class=" h1 mb-0" id="orderyeartotal"></div>
                                    <div>/筆</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="row pb-3">
                    <div class="col-4">
                        <div class="card shadow mb-4">
                            <!-- Card Header - Dropdown -->
                            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">會員年齡比例</h6>
                                <div class="dropdown no-arrow">
                                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                         aria-labelledby="dropdownMenuLink">
                                        <div class="dropdown-header">Dropdown Header:</div>
                                        <a class="dropdown-item" href="#">Action</a>
                                        <a class="dropdown-item" href="#">Another action</a>
                                        <div class="dropdown-divider"></div>
                                        <a class="dropdown-item" href="#">Something else here</a>
                                    </div>
                                </div>
                            </div>
                            <!-- Card Body -->
                            <div class="card-body">
                                <div class="chart-pie  pt-4 pb-2">
                                    <canvas id="Mycanvas"></canvas>
                                </div>
                                
                            </div>
                        </div>
                    </div>

                    <div class="col-8">
                        <div class="card shadow mb-4">
                            <!-- Card Header - Dropdown -->
                            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                                <h6 class="m-0 font-weight-bold text-primary">收益成長</h6>
                                <div class="dropdown no-arrow">
                                    <a class="dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                                       data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <i class="fas fa-ellipsis-v fa-sm fa-fw text-gray-400"></i>
                                    </a>
                                    <div class="dropdown-menu dropdown-menu-right shadow animated--fade-in"
                                         aria-labelledby="dropdownMenuLink">
                                        <div class="dropdown-header">Dropdown Header:</div>
                                        <a class="dropdown-item" href="#">Action</a>
                                        <a class="dropdown-item" href="#">Another action</a>
                                        <div class="dropdown-divider"></div>
                                        <a class="dropdown-item" href="#">Something else here</a>
                                    </div>
                                </div>
                            </div>
                            <!-- Card Body -->
                            <div class="card-body">
                                <div class="chart-area">
                                    <canvas id="canvas"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>


            </div>
            
            <!-- End of Main Content -->
            <!-- Footer -->
            <footer class="sticky-footer bg-white">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright &copy; Your Website 2020</span>
                    </div>
                </div>
            </footer>
            <!-- End of Footer -->

        </div>
    <!-- End of Content Wrapper -->

@section topCSS{ 

        <style>
            .chart-pie{
                height:80% !important;
            }

            .chart-area{
                height: 80% !important;
            }
        </style>
}

@section endJS{
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="vendor/chart.js/Chart.min.js"></script>
    <script>

        axios('/api/Product/GetMemberagerange')
            .then(response => {

                console.log(response);
                console.log(123);
                console.log(response.data.result);

                console.log(response.data.result.length);

                //孩童0-10
                let Childage = 0;
                //青少年 11-20
                let Youngage = 0;
                //成年 21-30
                let Manage = 0;
                //中年 31-40
                let Middleage = 0;
                //老年41-50
                let elderly = 0;

                let count = 0;
                for (i = 0; i < response.data.result.length; i++) {
                    if (response.data.result[i].age.days > 0 && response.data.result[i].age.days < 11) {
                        Childage++;
                    }
                    else if (response.data.result[i].age.days > 10 && response.data.result[i].age.days < 21) {
                        Youngage++;
                    }
                    else if (response.data.result[i].age.days > 20 && response.data.result[i].age.days < 31) {
                        Manage++;
                    }
                    else if (response.data.result[i].age.days > 30 && response.data.result[i].age.days < 41) {
                        Middleage++;
                    }
                    else {
                        elderly++;
                    }
                }
                var ctx = document.getElementById('Mycanvas').getContext('2d');
                var myChart = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: ['Child(0-10)', 'Young (11-20)', 'Adult(21-30)', 'elderly(>31)'],
                        datasets: [{
                            label: '各月收益',
                            data: [Childage, Youngage, Manage, elderly],
                            backgroundColor: [
                                'rgba(255, 99, 132, 0.2)',
                                'rgba(54, 162, 235, 0.2)',
                                'rgba(255, 206, 86, 0.2)',
                                'rgba(75, 192, 192, 0.2)',
                                'rgba(153, 102, 255, 0.2)',
                                'rgba(255, 159, 64, 0.2)'
                            ],
                            borderColor: [
                                'rgba(255, 99, 132, 1)',
                                'rgba(54, 162, 235, 1)',
                                'rgba(255, 206, 86, 1)',
                                'rgba(75, 192, 192, 1)',
                                'rgba(153, 102, 255, 1)',
                                'rgba(255, 159, 64, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        legend: {
                            position: 'bottom'
                        },

                        scales: {
                            y: {
                                beginAtZero: true
                            }

                        }

                    }
                });

                console.log(Childage);
                console.log(Youngage);
                console.log(Manage);
                console.log(elderly);

            })

        axios.get('/api/Product/GetAllCount')
            .then(res => {
                if (res.data.status == 0) {
                    this.items = res.data.result;
                    this.Januarytotal = res.data.result[0].orderJanuarytotal;
                    this.Februarytotal = res.data.result[0].orderFebruarytotal;
                    this.Marchtotal = res.data.result[0].orderMarchtotal;
                    this.Apriltotal = res.data.result[0].orderApriltotal;
                    this.Maytotal = res.data.result[0].orderMaytotal;
                    this.Junetotal = res.data.result[0].orderJunetotal;
                    this.Julytotal = res.data.result[0].orderJulytotal;
                    this.Augusttotal = res.data.result[0].orderAugusttotal;
                    this.Septembertotal = res.data.result[0].orderSeptembertotal;
                    this.Octoberrtotal = res.data.result[0].orderOctoberrtotal;
                    this.Novembertotal = res.data.result[0].orderNovembertotal;
                    this.Decembertotal = res.data.result[0].orderDecembertotal;

                    console.log(res.data.result[0])
                    console.log(res.data.result[0].orderTotal)
                    console.log(res.data.result[0].orderNovembertotal);
                    console.log(Januarytotal);


                    var ctx = document.getElementById('canvas').getContext('2d');
                    var myChart = new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],
                            datasets: [{
                                label: '各月收益',
                                data: [Januarytotal, Februarytotal, Marchtotal, Apriltotal, Maytotal, Junetotal, Julytotal, Augusttotal, Septembertotal, Octoberrtotal, Novembertotal, Decembertotal],
                                backgroundColor: [
                                    'rgba(255, 99, 132, 0.2)',
                                    'rgba(54, 162, 235, 0.2)',
                                    'rgba(255, 206, 86, 0.2)',
                                    'rgba(75, 192, 192, 0.2)',
                                    'rgba(153, 102, 255, 0.2)',
                                    'rgba(255, 159, 64, 0.2)'
                                ],
                                borderColor: [
                                    'rgba(255, 99, 132, 1)',
                                    'rgba(54, 162, 235, 1)',
                                    'rgba(255, 206, 86, 1)',
                                    'rgba(75, 192, 192, 1)',
                                    'rgba(153, 102, 255, 1)',
                                    'rgba(255, 159, 64, 1)'
                                ],
                                borderWidth: 1
                            }]
                        },
                        options: {
                            scales: {
                                y: {
                                    beginAtZero: true
                                }
                            }
                        }
                    });
                }
            })
        axios.get('/api/Product/GetCounttotal')
            .then(resdata => {
                //   let productdatatotal;
                //   let memberdatatoal;
                //   let orderdatatotal;
                //   let commentdatatotal;

                console.log('123456');
                console.log(resdata);
                console.log(resdata.data.result[0].productTotal)

                let productdatatotal = resdata.data.result[0].productTotal;
                let memberdatatoal = resdata.data.result[0].memberTotal;
                let orderdatatotal = resdata.data.result[0].orderTotal;
                let commentdatatotal = resdata.data.result[0].commentTotal;
                let earningsmonthdatatotal = resdata.data.result[0].earningsMonthTotal;
                let earningsyeardataTotal = resdata.data.result[0].earningsYearTotal;
                let ordermonthdatatotal = resdata.data.result[0].orderMonthTotal;
                let orderyeardatatotal = resdata.data.result[0].orderYearTotal;


                let productctx = document.getElementById('producttotals');
                productctx.innerText = productdatatotal;

                let memberctx = document.getElementById('membertotals');
                memberctx.innerText = memberdatatoal;

                let orderctx = document.getElementById('ordertotals');
                orderctx.innerText = orderdatatotal;

                let commentctx = document.getElementById('commenttotal');
                commentctx.innerText = commentdatatotal;

                let earningsmonthctx = document.getElementById('earningsmonthtotal');
                earningsmonthctx.innerText = earningsmonthdatatotal;

                let earningsyearctx = document.getElementById('earningsyeartotal');
                earningsyearctx.innerText = earningsyeardataTotal;

                let ordermonthctx = document.getElementById('ordermonthtotal');
                ordermonthctx.innerText = ordermonthdatatotal;

                let orderyearctx = document.getElementById('orderyeartotal');
                orderyearctx.innerText = orderyeardatatotal;

                window.addEventListener('beforeprint', () => {
                    myChart.resize(600, 600);
                });
                window.addEventListener('afterprint', () => {
                    myChart.resize();
                });
            })



    </script>
}
@section topJS{

    <script>
        if (localStorage.getItem('accessToken') == null) {
            window.location.href = '/Epalback/login';
        }

    </script>
}